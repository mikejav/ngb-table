<div
  class="card"
  [ngClass]="{'border-primary': selectedRowsIds.length }"
>

  <div
    class="card-header"
    [ngClass]="{'bg-primary text-light': selectedRowsIds.length}"
    *ngIf="headerTemplate"
  >
    <ng-container *ngIf="selectedRowsIds.length; else noRowsSelected">
      <ng-container *ngTemplateOutlet="selectActionsHeaderTemplate"></ng-container>
    </ng-container>
    <ng-template #noRowsSelected>
      <ng-container *ngTemplateOutlet="headerTemplate"></ng-container>
    </ng-template>
  </div>
  
  <table class="table m-0">

    <thead>
      <tr>
        <th>
          <ngb-checkbox [checked]="areAllRowsSelected" (click)="toggleSelectAllRows()"></ngb-checkbox>
        </th>
        <ng-container *ngTemplateOutlet="headTemplate"></ng-container>
      </tr>
    </thead>

    <tbody>
      <ng-container *ngIf="rows.length">
        <ng-container *ngFor="let row of rows">
          <tr [ngClass]="{'table-primary': isRowSelected(row)}">
            <td>
              <ngb-checkbox [checked]="isRowSelected(row)" (checkChange)="toggleRowSelection(row)"></ngb-checkbox>
            </td>
            <ng-container *ngTemplateOutlet="bodyRowTemplate; context: { $implicit: row }"></ng-container>
          </tr>
        </ng-container>
        <ng-container *ngFor="let footerRowTemplate of footerRowTemplates">
          <tr>
            <ng-container *ngTemplateOutlet="footerRowTemplate.templateRef"></ng-container>
          </tr>
        </ng-container>
      </ng-container>
    </tbody>
  
  </table>

  <div class="card-footer" *ngIf="footerTemplate">
    <ng-container *ngTemplateOutlet="footerTemplate"></ng-container>
  </div>

</div>
